{% extends 'base.html' %}
{% block content %}

<h1 class="text-3xl font-bold mb-6 text-gray-800">Dashboard ðŸ“Š</h1>

<!-- Stats Cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">

    <!-- Total Students -->
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-blue-600">Total Students</h3>
        <p class="text-4xl font-bold mt-3">{{ total }}</p>
    </div>

    <!-- Average Age -->
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-green-600">Average Age</h3>
        <p class="text-4xl font-bold mt-3">{{ avg_age|floatformat:1 }}</p>
    </div>

    <!-- Youngest Student -->
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-purple-600">Youngest Student</h3>
        {% if youngest %}
        <p class="text-xl font-bold mt-3">{{ youngest.name }} ({{ youngest.age }})</p>
        {% else %}
        <p class="text-gray-500 mt-3">No data</p>
        {% endif %}
    </div>
</div>


<!-- 2nd Row -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">

    <!-- Oldest Student -->
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-red-600">Oldest Student</h3>
        {% if oldest %}
        <p class="text-xl font-bold mt-3">{{ oldest.name }} ({{ oldest.age }})</p>
        {% else %}
        <p class="text-gray-500 mt-3">No data</p>
        {% endif %}
    </div>

    <!-- Recent Students -->
    <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition col-span-2">
        <h3 class="text-xl font-semibold text-blue-600 mb-3">Recently Added Students</h3>

        <table class="min-w-full text-left">
            <thead>
                <tr class="bg-gray-200">
                    <th class="py-2 px-2">ID</th>
                    <th class="py-2 px-2">Name</th>
                    <th class="py-2 px-2">Age</th>
                    <th class="py-2 px-2">Email</th>
                </tr>
            </thead>
            <tbody>
                {% for s in recent %}
                <tr class="border-b">
                    <td class="py-2 px-2">{{ s.id }}</td>
                    <td class="py-2 px-2">{{ s.name }}</td>
                    <td class="py-2 px-2">{{ s.age }}</td>
                    <td class="py-2 px-2">{{ s.email }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-gray-500 py-3">No recent students</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

</div>

{% endblock %}
